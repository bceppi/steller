<p id="notice"><%= notice %></p>

<h1>Posts</h1>
<div class="row">
  <div class="col-md-12" style="z-index: 2;">
    <div class="row">
      <div class="col-md-9 col-xs-8">
          <h3 class="gray n-font up">For you</h3>
      </div>
    </div>
  </div>
</div>
<hr>
<div class="container">
  <% (0..@posts.length-1).each do |c|%>
    <%if c%3 == 0 %>
      <%if c == 3 %>
      <br>
      <div class="row">
        <div class="col-md-12" style="z-index: 2;">
          <div class="row">
            <div class="col-md-9 col-xs-8">
                <h3 class="gray n-font up">Amazing Stories</h3>
            </div>
          </div>
        </div>
      </div>
      <hr>
      <%end%>
      <div class="row">
    <%end%>
        <div class="col-sm-4">
          <div class="card" style="width: 18rem;">
            <%= image_tag @posts[c].main_photo.url, class: "card-img-top", height: 180, width: 286 %>
            <div class="card-body">
              <h5 class="card-title"><%= @posts[c].title %></h5>
              <p class="card-text">
                <p>
                  <%="by "+ @posts[c].nickname%>
                </p>
                <p>
                  <i class="fa fa-diamond" aria-hidden="true"></i><b class="like"> <%= @likes.where(post: @posts[c]).count%></b>
                </p>
              </p>
              <%= link_to "Read more", post_path(@posts[c]), class: "btn btn-light"%>
            </div>
          </div>
        </div>
    <%if (c+1)%3 == 0 %>
      </div>
      <br>
    <%end%>
  <%end%>
</div>
<script>
  $( ".fa .fa-diamond" ).on('click', function() {
    console.log("entro");
    $(this).style.color = "red";
    likes = $( ".like" ).val();
    $( ".like" ).empty();
    new_likes = parseInt(likes.trim()) + 1;
    $( ".like" ).text(new_likes.toString());
  });
</script>
